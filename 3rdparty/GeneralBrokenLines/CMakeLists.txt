# #require a certain version
CMAKE_MINIMUM_REQUIRED( VERSION 3.1 )

# declare the project name
PROJECT(GBL)

# project version
SET( ${PROJECT_NAME}_VERSION_MAJOR 2 )
SET( ${PROJECT_NAME}_VERSION_MINOR 1 )
SET( ${PROJECT_NAME}_VERSION_PATCH 6 )

# enable ROOT support
OPTION( SUPPORT_ROOT "Support ROOT for user I/O" True )
IF( SUPPORT_ROOT )
  FIND_PACKAGE(ROOT REQUIRED)
  ADD_DEFINITIONS(-DGBL_EIGEN_SUPPORT_ROOT)
ENDIF()
FIND_PACKAGE(Eigen3 REQUIRED)

# include directories
IF( SUPPORT_ROOT )
  INCLUDE_DIRECTORIES(SYSTEM BEFORE ./include ${ROOT_INCLUDE_DIRS} ${EIGEN3_INCLUDE_DIR} )
ELSE()
  INCLUDE_DIRECTORIES(SYSTEM BEFORE ./include ${EIGEN3_INCLUDE_DIR} )
ENDIF()
INSTALL( DIRECTORY ./include DESTINATION . PATTERN ".svn" EXCLUDE )

# declare the stupid ROOT library path
LINK_DIRECTORIES(${ROOT_LIBRARY_DIR})

# add library
AUX_SOURCE_DIRECTORY( ./src library_sources )
ADD_LIBRARY(${PROJECT_NAME} SHARED ${library_sources})
INSTALL( TARGETS ${PROJECT_NAME} DESTINATION lib )
TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${ROOT_LIBS})
